'use strict';

Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });

const fs = require('node:fs');
const path = require('node:path');
const transform = require('../../../utils/transform.cjs');

const toPackageJson = () => {
  const content = `{
  "name": "dot-mdxlayer",
  "description": "This package is auto-generated by mdxlayer",
  "version": "0.0.0",
  "exports": {
    "./generated": {
      "import": "./generated/index.mjs",
      "require": "./generated/index.cjs"
    }
  },
  "typesVersions": {
    "*": {
      "generated": [
        "./generated"
      ]
    }
  }
}`;
  const pkgPath = path.resolve(process.cwd(), ".mdxlayer", "package.json");
  const isChanged = !fs.existsSync(pkgPath);
  if (isChanged) {
    transform.transformFile({
      doc: content,
      filename: "package.json",
      subpath: "/"
    });
  }
};

exports.toPackageJson = toPackageJson;
